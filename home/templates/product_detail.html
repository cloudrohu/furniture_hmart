{% extends 'homebase.html' %}
{% load static %}


{% block title %} {{ product.title }} {% endblock %}
{% block description %} {{ product.description }} {% endblock %}
{% block keywords %} {{ product.keywords }} {% endblock %}

{% block sidebar %} {% include 'sidebar.html' %} {% endblock %}

{% block body %}


<style>
    .thumb-active {
        border: 2px solid #f59e0b;
    }
    .tab-btn.active {
        border-bottom: 2px solid #ea580c;
        color: #1f2937;
    }
</style>

<style>
    /* Hide horizontal scrollbar */
    ::-webkit-scrollbar {
    height: 0;
    }
</style>


<!-- ✅ Dynamic Breadcrumb with FOR loop -->
<nav class="max-w-7xl mx-auto px-4 py-4 text-gray-600 text-sm flex items-center flex-wrap gap-1">
  <!-- Home Link -->
  <a href="/" class="hover:underline flex items-center gap-1">
    <i class="fa-solid fa-house text-gray-500"></i> Home
  </a>


  <!-- Product Name -->
  <i class="fa-solid fa-angle-right text-gray-400"></i>
  <span class="text-gray-800 font-medium">{{ product.title }}</span>
</nav>




<!-- 🛋️ Product Section -->
<section class="max-w-7xl mx-auto bg-white rounded-lg shadow-md grid grid-cols-1 lg:grid-cols-2 gap-10 p-6 md:p-10">

       <!-- 🖼️ Left: Image Gallery -->
        <div>
            <!-- Main Product Image -->
            <div class="relative group overflow-hidden rounded-lg">
                <img id="mainImage" 
                    src="{{ product.image.url }}" 
                    alt="{{ product.title }}" 
                    class="w-full h-[400px] object-cover transition-transform duration-300 group-hover:scale-105 rounded-lg shadow-sm">
            </div>

           <!-- ✅ Thumbnail Gallery with Horizontal Scroll -->
                <div class="mt-4 overflow-x-auto">
                <div class="flex gap-3 min-w-max">
                    <!-- Main image thumbnail -->
                    <img src="{{ product.image.url }}" 
                        class="thumb thumb-active w-20 h-20 object-cover rounded-lg cursor-pointer flex-shrink-0">

                    <!-- Additional gallery images -->
                    {% for img in images %}
                    <img src="{{ img.image.url }}" 
                        class="thumb w-20 h-20 object-cover rounded-lg cursor-pointer flex-shrink-0">
                    {% endfor %}
                </div>
                </div>

              <!-- 📄 Product Description (moved below price) -->
                <div class="mb-5 bg-gray-50 rounded-lg p-4 border border-gray-200 mt-10">
                    <h3 class="text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2">
                    <i class="fa-solid fa-file-lines text-orange-600"></i> Product Description
                    </h3>

                    {% if product.description %}
                    <div class="prose max-w-none text-gray-700 leading-relaxed">
                        {{ product.description|safe }}
                    </div>
                    {% elif product.description %}
                    <p class="text-gray-700 leading-relaxed">{{ product.description }}</p>
                    {% else %}
                    <p class="text-gray-500 italic">No description available for this product.</p>
                    {% endif %}
                </div>

        </div>


    <!-- Right: Product Info -->
    <div>
    <!-- 🏷️ Product Title -->
    <h1 class="text-3xl font-bold text-gray-800 mb-3">
        {{ product.title|default:"Product Title" }}
    </h1>

    <!-- 💰 Price -->
    <div class="flex items-center gap-3 mb-3">
        <span class="text-4xl font-semibold text-green-600">
        ₹{{ product.get_final_price|default:"0" }}
        </span>
        {% if product.discount > 0 %}
        <span class="line-through text-gray-400 text-lg">
            ₹{{ product.price }}
        </span>
        <span class="bg-red-500 text-white text-sm px-2 py-1 rounded font-medium">
            {{ product.discount }}% OFF
        </span>
        {% endif %}
    </div>


    <!-- 🧠 Variants Options -->


    {% if product.variant != 'None' %}
        <div class="mb-6 space-y-6">
        
            {% if sizes %}
                <!-- Size Selection -->
                <div>
                    <p class="text-sm font-semibold text-gray-800 mb-2">Select Size:</p>
                    <div class="flex flex-wrap gap-2">
                    {% for s in sizes %}
                    <label class="cursor-pointer">
                        <input type="radio" name="size" value="{{ s.id }}" class="hidden peer"{% if variant.size_id == s.size_id %}checked{% endif %}>
                        <span class="px-4 py-2 text-sm rounded-full border border-gray-300 peer-checked:border-orange-500 peer-checked:bg-orange-50 peer-checked:text-orange-600 hover:border-orange-400 transition">
                        {{ s.size }}
                        </span>
                    </label>
                    {% endfor %}
                    </div>
                </div>
            {% endif %}

            {% if colors %}
            <!-- Color Selection -->
            <div>
                <p class="text-sm font-semibold text-gray-800 mb-2">Select Color:</p>
                <div class="flex flex-wrap gap-3">
                {% for c in colors %}
                <label class="relative cursor-pointer">
                    <input 
                    type="radio" 
                    name="variantid" 
                    value="{{ c.id }}" 
                    class="hidden peer"
                    {% if variant.id == c.id %}checked{% endif %}
                    >
                    <span 
                    class="block w-8 h-8 rounded-full border-2 border-gray-300 peer-checked:border-orange-500 peer-checked:ring-2 peer-checked:ring-orange-300 transition"
                    style="background-color: {{ c.color.code }}">
                    </span>
                    <span class="absolute -bottom-5 left-1/2 -translate-x-1/2 text-xs text-gray-600 whitespace-nowrap">
                    {{ c.color }}
                    </span>
                </label>
                {% endfor %}
                </div>
            </div>
            {% endif %}

                </div>
            {% endif %}


        <!-- 🏷️ Special Offer -->
        <div class="mb-5 bg-yellow-100 border-l-4 mt-2 border-yellow-500 text-yellow-800 px-4 py-2 rounded text-sm">
            <i class="fa-solid fa-tags mr-1"></i>
            <strong>Special Offer:</strong> Extra 10% off on prepaid orders!
        </div>

    <!-- 📝 Product Meta Info -->
    <div class="mb-5 space-y-2 text-sm text-gray-700">
        <p>
        <strong>Brand:</strong> 
        <span class="text-gray-800">{{ product.brand.title|default:"No Brand" }}</span>
        </p>
        <p>
        <strong>Product Code:</strong> 
        <span class="text-gray-800">{{ product.id|default:"N/A" }}</span>
        </p>
        <p>
        <strong>Availability:</strong>
        {% if product.availability == 'In Stock' %}
            <span class="text-green-600 font-semibold">
            <i class="fa-solid fa-check mr-1"></i> {{ product.availability }}
            </span>
        {% elif product.availability == 'Out of Stock' %}
            <span class="text-red-600 font-semibold">
            <i class="fa-solid fa-times mr-1"></i> {{ product.availability }}
            </span>
        {% elif product.availability == 'Limited Stock' %}
            <span class="text-orange-500 font-semibold">
            <i class="fa-solid fa-box-open mr-1"></i> {{ product.availability }}
            </span>
        {% elif product.availability == 'Pre Order' %}
            <span class="text-blue-600 font-semibold">
            <i class="fa-solid fa-clock mr-1"></i> {{ product.availability }}
            </span>
        {% else %}
            <span class="text-gray-500 font-semibold">N/A</span>
        {% endif %}
        </p>


        <p>
        <strong>Category:</strong> 
        <span class="text-gray-800">
            {{ product.category.title|default:"Uncategorized" }}
        </span>
        </p>
        <p>
        <strong>Delivery:</strong> 
        <span class="text-gray-800">4–7 Days (Free Shipping)</span>
        </p>
    </div>

    <!-- Quantity + CTA Buttons -->
    <div class="flex flex-wrap items-center gap-4 mb-8">
        <div class="flex items-center border rounded-lg overflow-hidden shadow-sm">
        <button id="decrement" class="px-3 py-2 text-lg hover:bg-gray-100">
            <i class="fa-solid fa-minus"></i>
        </button>
        <input id="quantity" type="number" value="1" min="1" class="w-14 text-center border-x outline-none">
        <button id="increment" class="px-3 py-2 text-lg hover:bg-gray-100">
            <i class="fa-solid fa-plus"></i>
        </button>
        </div>

        <button class="flex-1 bg-yellow-500 text-white px-5 py-3 rounded-lg font-semibold hover:bg-yellow-600 transition flex justify-center items-center gap-2 shadow-sm">
        <i class="fa-solid fa-cart-shopping"></i> Add to Cart
        </button>

        <button class="flex-1 bg-orange-600 text-white px-5 py-3 rounded-lg font-semibold hover:bg-orange-700 transition flex justify-center items-center gap-2 shadow-sm">
        <i class="fa-solid fa-bolt"></i> Buy Now
        </button>
    </div>

    
    </div>



</section>







<!-- 🧭 Product Tabs -->
<section class="max-w-7xl mx-auto mt-10 px-4">
  <div class="bg-white rounded-lg shadow p-6">

    <!-- Tabs -->
    <div class="flex flex-wrap border-b">
      <button class="tab-btn active px-5 py-3 font-medium text-gray-800" data-tab="description">
        <i class="fa-solid fa-file-lines mr-1"></i> Description
      </button>
      <button class="tab-btn px-5 py-3 font-medium text-gray-600 hover:text-gray-800" data-tab="specifications">
        <i class="fa-solid fa-list mr-1"></i> Specifications
      </button>
      <button class="tab-btn px-5 py-3 font-medium text-gray-600 hover:text-gray-800" data-tab="reviews">
        <i class="fa-solid fa-star mr-1"></i> Reviews
      </button>
    </div>

    <!-- 📝 Description Tab -->
    <div class="tab-content mt-6" id="description">
      <h3 class="text-xl font-semibold mb-3">Description</h3>
      {% if product.description %}
        <div class="prose max-w-none text-gray-700 leading-relaxed">
          {{ product.description|safe }}
        </div>
      {% elif product.description %}
        <p class="text-gray-700 leading-relaxed">
          {{ product.description }}
        </p>
      {% else %}
        <p class="text-gray-500 italic">No description available for this product.</p>
      {% endif %}
    </div>

    <!-- 📋 Specifications Tab -->
    <div class="tab-content mt-6 hidden" id="specifications">
      <h3 class="text-xl font-semibold mb-3">Specifications</h3>
      {% if specifications %}
      <table class="w-full border-collapse">
        <tbody>
          {% for spec in specifications %}
          <tr class="{% cycle 'bg-white' 'bg-gray-50' %} border-b">
            <td class="py-2 px-3 font-medium text-gray-700 w-1/3">{{ spec.key }}</td>
            <td class="py-2 px-3 text-gray-600">{{ spec.value }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p class="text-gray-500 italic">No specifications available for this product.</p>
      {% endif %}
    </div>

    <!-- ⭐ Reviews Tab (Static) -->
    <div class="tab-content mt-6 hidden" id="reviews">
      <h3 class="text-xl font-semibold mb-3">Customer Reviews</h3>
      <div class="space-y-5">

        <!-- Review 1 -->
        <div class="border-b pb-4">
          <div class="flex items-center justify-between mb-2">
            <div class="font-semibold text-gray-800">Amit Sharma</div>
            <div class="flex text-yellow-400">
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
              <i class="fa-regular fa-star"></i>
            </div>
          </div>
          <p class="text-gray-600 text-sm">Amazing quality! Exactly what I expected. The finishing is excellent.</p>
        </div>

        <!-- Review 2 -->
        <div class="border-b pb-4">
          <div class="flex items-center justify-between mb-2">
            <div class="font-semibold text-gray-800">Neha Verma</div>
            <div class="flex text-yellow-400">
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
              <i class="fa-regular fa-star"></i>
              <i class="fa-regular fa-star"></i>
            </div>
          </div>
          <p class="text-gray-600 text-sm">Product is good, but delivery was delayed by 2 days. Still happy overall.</p>
        </div>

        <!-- Review 3 -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <div class="font-semibold text-gray-800">Ravi Kumar</div>
            <div class="flex text-yellow-400">
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
              <i class="fa-solid fa-star"></i>
            </div>
          </div>
          <p class="text-gray-600 text-sm">Excellent product, delivery was quick and packaging was great!</p>
        </div>

      </div>
    </div>

  </div>
</section>

    <!-- 🧠 Tabs Script -->
    <script>
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach(btn => {
        btn.addEventListener('click', () => {
        const target = btn.getAttribute('data-tab');
        tabButtons.forEach(b => b.classList.remove('active', 'text-gray-800'));
        btn.classList.add('active', 'text-gray-800');
        tabContents.forEach(c => c.classList.add('hidden'));
        document.getElementById(target).classList.remove('hidden');
        });
    });
    </script>


<script>
    document.addEventListener('DOMContentLoaded', function () {

    // Quantity
    const qtyInput = document.getElementById('quantity');
    document.getElementById('increment').onclick = () => qtyInput.value = parseInt(qtyInput.value) + 1;
    document.getElementById('decrement').onclick = () => {
        if (parseInt(qtyInput.value) > 1) qtyInput.value = parseInt(qtyInput.value) - 1;
    };

    // 🖼️ Thumbnail Switcher
    const thumbs = document.querySelectorAll('.thumb');
    const mainImage = document.getElementById('mainImage');
    thumbs.forEach(thumb => {
        thumb.addEventListener('click', () => {
        thumbs.forEach(t => t.classList.remove('thumb-active'));
        thumb.classList.add('thumb-active');
        mainImage.src = thumb.src;
        });
    });

    // 🧭 Tabs
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    tabButtons.forEach(btn => {
        btn.addEventListener('click', () => {
        const target = btn.getAttribute('data-tab');
        tabButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        tabContents.forEach(c => c.classList.add('hidden'));
        document.getElementById(target).classList.remove('hidden');
        });
    });

    });
</script>


<br>
<br>
<br>




{% endblock %}  
{% load static %}
<!DOCTYPE html>
{% for rs in setting %}
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="{{ rs.description}}">
  <meta name="keywords" content="{{ rs.keywords}}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
  <title>{{rs.title}}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Tailwind + Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
  <link rel="stylesheet" href="{% static '' %}assets//css/style.css">
</head>
<body class="bg-gray-200">


{% include 'header.html' %}

{% block slider %} {% endblock %}
{% block category %} {% endblock %}
{% block body %} {% endblock %}
{% include 'footer.html' %}

{% block foot %} {% endblock %}

<!--LINK JS START HERE -->
<scriptlink>  
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>



  <!-- Alpine.js for slider logic -->
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  <!-- Alpine.js for slider logic -->
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

  <!-- Swiper.js CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" />
  
  <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>

  <script src="{% static '' %}assets//js/nav.js"></script>
  <script src="{% static '' %}assets//js/script.js"></script>
  <script src="{% static '' %}assets//js/slider.js"></script>


<script>
    // Cetegory Start Here //
    const slider = document.getElementById("categorySlider");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    // --- 1. Button Scroll (Infinite) ---
    function scrollSlider(amount) {
      slider.scrollBy({ left: amount, behavior: "smooth" });

      // agar end pe pohch gaye to dobara start se set kar do
      if (slider.scrollLeft + slider.offsetWidth >= slider.scrollWidth) {
        setTimeout(() => {
          slider.scrollTo({ left: 0, behavior: "smooth" });
        }, 500);
      }
      // agar start pe gaye aur prev dabaya to last pe bhej do
      if (slider.scrollLeft === 0 && amount < 0) {
        setTimeout(() => {
          slider.scrollTo({ left: slider.scrollWidth, behavior: "smooth" });
        }, 500);
      }
    }

    prevBtn.addEventListener("click", () => scrollSlider(-300));
    nextBtn.addEventListener("click", () => scrollSlider(300));

    // --- 2. Mouse Drag / Touch Scroll ---
    let isDown = false;
    let startX;
    let scrollLeft;

    slider.addEventListener("mousedown", (e) => {
      isDown = true;
      slider.classList.add("active");
      startX = e.pageX - slider.offsetLeft;
      scrollLeft = slider.scrollLeft;
    });

    slider.addEventListener("mouseleave", () => {
      isDown = false;
      slider.classList.remove("active");
    });

    slider.addEventListener("mouseup", () => {
      isDown = false;
      slider.classList.remove("active");
    });

    slider.addEventListener("mousemove", (e) => {
      if (!isDown) return;
      e.preventDefault();
      const x = e.pageX - slider.offsetLeft;
      const walk = (x - startX) * 2; // drag speed
      slider.scrollLeft = scrollLeft - walk;
    });

    // Touch support (mobile)
    let startTouchX = 0;
    slider.addEventListener("touchstart", (e) => {
      startTouchX = e.touches[0].pageX;
    });

    slider.addEventListener("touchmove", (e) => {
      const touchX = e.touches[0].pageX;
      const walk = (touchX - startTouchX) * 2;
      slider.scrollLeft -= walk;
      startTouchX = touchX;
    });
    // Cetegory END Here //

    // PRODUCT START HERE 
      // Tab switching
        const buttons = document.querySelectorAll('.tab-btn');
        const panels  = document.querySelectorAll('.tab-panel');

        buttons.forEach(btn=>{
          btn.addEventListener('click', ()=>{
            buttons.forEach(b=>b.classList.remove('active'));
            btn.classList.add('active');
            panels.forEach(p=>p.classList.remove('active'));

            const id = btn.dataset.tab;
            document.getElementById(id).classList.add('active');
            // smooth scroll if needed:
            // document.getElementById(id).scrollIntoView({behavior:'smooth',block:'start'});
          });
        });


        const openBtn = document.getElementById("openPopup");
      const closeBtn = document.getElementById("closePopup");
      const popup = document.getElementById("popup");

      openBtn.addEventListener("click", () => {
        popup.classList.remove("hidden"); // Show popup
      });

      closeBtn.addEventListener("click", () => {
        popup.classList.add("hidden"); // Hide popup
      });

      // Popup ke bahar click karne par close
      popup.addEventListener("click", (e) => {
        if (e.target === popup) {
          popup.classList.add("hidden");
        }
      });
    // PRODUCT END HERE 


    document.addEventListener("DOMContentLoaded", function () {
      // Check if current page exists
      fetch(window.location.pathname, { method: "HEAD" })
        .then(response => {
          if (!response.ok) {
            window.location.href = "/404.html"; // Redirect to 404 page
          }
        })
        .catch(() => {
          window.location.href = "/404.html"; // Agar koi error aaya to bhi redirect
        });
    });



</script>

</scriptlink>
<!--LINK JS END HERE -->


</body>
</html>
{% endfor %}
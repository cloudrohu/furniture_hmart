<!-- HEADER -->
{% load static %}
{% load mptt_tags %}

<!-- NAVBAR START HERE -->
{% for rs in setting %}
<header>

      <!-- Top Delivery Bar -->
        <div class="bg-teal-700 text-white flex items-center justify-center gap-3 py-2 px-4 text-sm">
      
                  <a href="/">
                    <img src="{{rs.logo.url}}" alt="woodflix" class="h-9 lg:hidden lg:12 rounded-lg">
                  </a>

      
            <div class="flex items-center gap-4 ml-auto">

            <!-- Cart Button -->
            <div id="cart-btn" class="flex flex-col items-center cursor-pointer relative">
                <img src="{% static '' %}assets/images/icons/shopping-cart-outline-svgrepo-com.svg" class="h-8 w-8" alt="">
                <span class="text-black font-medium">Cart</span>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-red-600 text-white text-xs px-2 py-0.5 rounded-full">0</span>
            </div>

            <!-- Cart Sidebar -->
            <div id="cart-sidebar" class="fixed top-0 right-0 w-80 h-full bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-50 flex flex-col">
                <!-- Header -->
                <div class="flex items-center justify-between p-4 border-b">
                    <h2 class="text-lg font-bold text-black">Your Cart (<span id="cart-items-count">0</span>)</h2>
                    <button id="close-cart" class="text-2xl font-bold text-black hover:text-red-600">&times;</button>
                </div>

                <!-- Cart Items -->
                <div id="cart-items" class="flex-1 overflow-y-auto p-4 flex flex-col items-center justify-center text-black">
                    <p class="text-black font-medium">Your cart is empty</p>
                    <a href="product_list.html">
                    <button class="mt-4 px-4 py-2 bg-black text-white rounded font-semibold">Continue Shopping</button>
                    </a>
                  </div>

                <!-- Footer -->
                <div id="cart-footer" class="p-4 border-t hidden">
                    <div class="flex justify-between mb-3">
                        <span class="font-bold text-black">Subtotal</span>
                        <span id="cart-subtotal" class="font-bold text-black">$0.00</span>
                    </div>
                    <div class="flex gap-2">
                        <button class="flex-1 py-2 bg-gray-200 rounded font-semibold text-black hover:bg-gray-300">View Cart</button>
                        <button class="flex-1 py-2 bg-black text-white rounded font-semibold hover:bg-gray-800">Checkout</button>
                    </div>
                </div>
            </div>

        <!-- Overlay -->
        <div id="cart-overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-40"></div>

        <script>
            const cartBtn = document.getElementById("cart-btn");
            const cartSidebar = document.getElementById("cart-sidebar");
            const closeCart = document.getElementById("close-cart");
            const cartOverlay = document.getElementById("cart-overlay");
            const cartItems = document.getElementById("cart-items");
            const cartFooter = document.getElementById("cart-footer");
            const cartCount = document.getElementById("cart-count");
            const cartItemsCount = document.getElementById("cart-items-count");
            const cartSubtotal = document.getElementById("cart-subtotal");

            let cart = [];

            // Open Cart
            cartBtn.addEventListener("click", () => {
                cartSidebar.classList.remove("translate-x-full");
                cartOverlay.classList.remove("hidden");
            });

            // Close Cart
            closeCart.addEventListener("click", () => {
                cartSidebar.classList.add("translate-x-full");
                cartOverlay.classList.add("hidden");
            });
            cartOverlay.addEventListener("click", () => {
                cartSidebar.classList.add("translate-x-full");
                cartOverlay.classList.add("hidden");
            });

            // Add Product Example Function
            function addToCart(product) {
                cart.push(product);
                renderCart();
            }

            // Render Cart
            function renderCart() {
                if (cart.length === 0) {
                    cartItems.innerHTML = `
                        <div class="flex flex-col items-center justify-center text-gray-500 w-full h-full">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mb-2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.6 8h13.2L17 13H7z" /></svg>
                            <p>Your cart is empty</p>
                            <button class="mt-4 px-4 py-2 bg-black text-white rounded">Continue Shopping</button>
                        </div>`;
                    cartFooter.classList.add("hidden");
                } else {
                    cartItems.innerHTML = cart.map((item, index) => `
                        <div class="flex items-center justify-between mb-4">
                            <img src="${item.image}" alt="${item.name}" class="h-16 w-16 rounded object-cover">
                            <div class="flex-1 ml-3">
                                <h4 class="font-semibold">${item.name}</h4>
                                <p class="text-sm text-gray-500">Color: ${item.color}</p>
                                <div class="flex items-center mt-1">
                                    <button onclick="updateQty(${index}, -1)" class="px-2 border">-</button>
                                    <span class="px-3">${item.qty}</span>
                                    <button onclick="updateQty(${index}, 1)" class="px-2 border">+</button>
                                </div>
                            </div>
                            <div class="flex flex-col items-end">
                                <button onclick="removeItem(${index})" class="text-gray-400">&times;</button>
                                <span class="mt-auto font-semibold">$${(item.price * item.qty).toFixed(2)}</span>
                            </div>
                        </div>
                    `).join("");
                    cartFooter.classList.remove("hidden");

                    let subtotal = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
                    cartSubtotal.innerText = "$" + subtotal.toFixed(2);
                }

                cartCount.innerText = cart.length;
                cartItemsCount.innerText = cart.length;
            }

            // Update Qty
            function updateQty(index, change) {
                cart[index].qty += change;
                if (cart[index].qty <= 0) removeItem(index);
                renderCart();
            }

            // Remove Item
            function removeItem(index) {
                cart.splice(index, 1);
                renderCart();
            }

            // Example Product Add
            // Call this function when clicking "Add to Cart" button on product card
            // addToCart({ name: "Timelix Health Monitor", color: "White", price: 279.99, qty: 1, image: "watch.jpg" });
        </script>

               

                <!-- Support Center -->
                <div class=" flex flex-col items-center cursor-pointer">
                  <i class="fa-solid fa-phone-office"></i>
                  <a href="support_center.html">
                    <img src="{% static '' %}assets/images/icons/call-chat-svgrepo-com.svg" class="h-8 h-6" alt="Support Center">
                    </a>
                    <span>Support Center</span>
                </div>

                     <!-- Contact -->
                <div class=" flex flex-col items-center cursor-pointer">
                  <a href="contact.html">
                    <img src="{% static '' %}assets/images/icons/contact-women-talking-svgrepo-com.svg" class="h-8 h-6" alt="Support Center">
                   </a> 
                    <span>Contact</span>
                </div>

                <!-- Search Icon -->
                <button id="openSearch" class="flex flex-col items-center cursor-pointer">
                    <svg xmlns="http://www.w3.org/2000/svg" class="md:h-8 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z" />
                    </svg>
                <span>Search</span>
            </button>
        </div>
        </div>


            <!-- Search Popup -->
            <div id="searchPopup" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
            <div class="bg-white p-4 rounded-lg shadow-lg w-11/12 max-w-md">
                <div class="flex">
                <input type="text" placeholder="Search products..."
                    class="flex-1 border border-gray-300 rounded-l px-3 py-2 outline-none">
                <button class="border border-l-0 border-gray-300 rounded-r px-4 bg-gray-100 hover:bg-gray-200">
                    üîç
                </button>
                </div>
                <button id="closeSearch" class="mt-3 text-sm text-red-500 hover:underline">Close</button>
            </div>
            </div>

          <!-- Main Navbar -->
          <header class="bg-white shadow">
            <div class="max-w-7xl mx-auto px-4 lg:px-8 py-3 flex items-center justify-between">
                <!-- Left -->
                  <div class="flex items-center gap-3">
                    <button id="openMenu" type="button" class=" p-2 rounded hover:bg-gray-100">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                      </svg>
                    </button>

                    <a href="/">
                    <img src="{{rs.logo.url}}" alt="woodflix" class="h-9 hidden lg:block lg:h-16 rounded-lg">
                    </a>
                  </div>

                 <!-- Search (desktop) -->
                <div class="hidden lg:flex flex-1 mx-6">
                <input class="flex-1 border rounded-l px-4 py-2 outline-none" placeholder="Search your products">
                <button class="border border-l-0 rounded-r px-3 bg-gray-100 hover:bg-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12.9 14.32a8 8 0 111.414-1.414l4.243 4.243a1 1 0 01-1.414 1.414l-4.243-4.243z" clip-rule="evenodd"/>
                    </svg>
                </button>
                </div> 
              <!-- Icons -->
              <div class="flex items-center gap-4 text-xs md:text-sm">
                    <div class="flex flex-col items-center cursor-pointer">
                      <a href="my_orders.html">
                        <img src="{% static '' %}assets/images/icons/track.svg" class="h-7 md:h-8" alt="">
                        </a>
                        <span>Track</span>
                    </div>
                    <div class="flex flex-col items-center cursor-pointer">
                      <a href="auth.html">
                      <img src="{% static '' %}assets/images/icons/Sign in Sign up.svg" class="h-7 md:h-8" alt="">
                       </a>
                      <span>Sign in</span>
                    </div>
                    <div class="flex flex-col items-center cursor-pointer">
                      <a href="wishlist.html">
                        <img src="{% static '' %}assets/images/icons/Wishlist.svg" class="h-7 md:h-8" alt="">
                     </a>
                        <span>Wishlist</span>
                    </div>
                    <div class="flex flex-col items-center cursor-pointer">
                      <a href="cart.html">
                        <img src="{% static '' %}assets/images/icons/Cart.svg" class="h-7 md:h-8" alt="">
                        </a>
                        <span>Cart</span>
                    </div>

                    <div class="flex items-center gap-4 bg-white p-4 rounded-xl shadow-md max-w-xs">
                      <!-- Avatar -->
                      <div class="w-12 h-12 rounded-full overflow-hidden border-2 border-yellow-500">
                        <img src="{% static '' %}assets/images/icons/avatar icon.png" alt="User Avatar" class="w-full h-full object-cover">
                      </div>

                      <!-- Welcome Text -->
                      <div class="flex flex-col">
                        <span class="text-gray-500 text-sm hidden lg:block ">Welcome Back</span>
                        <h1 class="text-lg font-semibold text-gray-800 hidden lg:block flex items-center gap-2">
                        Aahilya Properties
                          <i class="fa-solid fa-star text-yellow-400"></i> <!-- Optional icon -->
                        </h1>
                      </div>
                    </div>


              </div>
             </div>
  </header>


  <!-- Overlay -->
  <!-- Main Category Menu (left) -->
  <aside id="menu" class="fixed inset-y-0 left-0 w-85 bg-white z-50 transform -translate-x-full transition-transform duration-300 shadow-xl">
    <div class="flex items-center justify-between p-4 border-b">
      <h3 class="text-lg font-semibold">Categories</h3>
        <img src="{{rs.logo.url}}" alt="woodflix" class="h-9 rounded-lg">

      <button id="closeMenu" type="button" class="p-1 rounded hover:bg-gray-100">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 8.586 6.293 4.879 4.879 6.293 8.586 10l-3.707 3.707 1.414 1.414L10 11.414l3.707 3.707 1.414-1.414L11.414 10l3.707-3.707-1.414-1.414L10 8.586z" clip-rule="evenodd"/>
        </svg>
      </button>
    </div>

    <div class="p-4 relative overflow-hidden">
      <input class="w-full border rounded px-3 py-2 mb-4" placeholder="Search products...">
        <div class="max-h-64 overflow-hidden transition-all duration-300" id="categoryList">

            <div id="categoryList">
            <nav class="space-y-3">
              <button class="catBtn w-full text-left py-2 border-b" data-target="living">Living</button>
              <button class="catBtn w-full text-left py-2 border-b" data-target="bedroom">Bedroom</button>
              <button class="catBtn w-full text-left py-2 border-b" data-target="dining">Dining Sets</button>
              <button class="catBtn w-full text-left py-2 border-b" data-target="office">Office Furniture</button>
              <button class="catBtn w-full text-left py-2 border-b" data-target="collections">Collections</button>

              <!-- Hidden categories -->
              <div id="extraCategories" class="hidden">
                <button class="catBtn w-full text-left py-2 border-b" data-target="outdoor">Outdoor</button>
                <button class="catBtn w-full text-left py-2 border-b" data-target="kitchen">Kitchen</button>
                <button class="catBtn w-full text-left py-2 border-b" data-target="decor">Decor</button>
                <button class="catBtn w-full text-left py-2 border-b" data-target="lighting">Lighting</button>
              </div>
            </nav>
          </div>

          <!-- Load More button -->
          <button id="loadMoreBtn" class="mt-3 text-teal-600 hover:underline">Load more...</button>

      <!-- Subcategory Shell INSIDE the menu (no gap) -->
      <section id="submenuShell" class="absolute top-0 right-0 h-full w-80 bg-white transform translate-x-full transition-transform duration-300 shadow-xl overflow-y-auto">
        <!-- LIVING -->
        <div id="panel-living" class="hidden">
          <div class="sticky top-0 bg-white p-4 border-b flex items-center gap-3">
            <button class="backBtn text-teal-700 flex items-center gap-1" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
              </svg>
              Back
            </button>
            <h4 class="text-lg font-semibold">Living</h4>
          </div>

          <div class="p-4 space-y-6">
            <div>
              <h5 class="font-semibold mb-2">Sofas</h5>
              <ul class="grid grid-cols-2 gap-3 text-sm">
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">2-Seater</a></li>
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">3-Seater</a></li>
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Recliner</a></li>
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Sofa cum Bed</a></li>
              </ul>
            </div>

            <div>
              <h5 class="font-semibold mb-2">Chairs</h5>
              <ul class="grid grid-cols-2 gap-3 text-sm">
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Armchair</a></li>
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Rocking Chair</a></li>
              </ul>
            </div>
          </div>
        </div>

        <!-- BEDROOM -->
        <div id="panel-bedroom" class="hidden">
          <div class="sticky top-0 bg-white p-4 border-b flex items-center gap-3">
            <button class="backBtn text-teal-700 flex items-center gap-1" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
              </svg>
              Back
            </button>
            <h4 class="text-lg font-semibold">Bedroom</h4>
          </div>

          <div class="p-4 space-y-6">
            <div>
              <h5 class="font-semibold mb-2">Beds</h5>
              <ul class="grid grid-cols-2 gap-3 text-sm">
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">King Size</a></li>
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Queen Size</a></li>
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Single Bed</a></li>
              </ul>
            </div>

            <div>
              <h5 class="font-semibold mb-2">Wardrobes</h5>
              <ul class="grid grid-cols-2 gap-3 text-sm">
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">2-Door</a></li>
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">3-Door</a></li>
                <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Sliding Door</a></li>
              </ul>
            </div>
          </div>
        </div>

        <!-- DINING -->
        <div id="panel-dining" class="hidden">
          <div class="sticky top-0 bg-white p-4 border-b flex items-center gap-3">
            <button class="backBtn text-teal-700 flex items-center gap-1" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
              </svg>
              Back
            </button>
            <h4 class="text-lg font-semibold">Dining Sets</h4>
          </div>

          <div class="p-4 space-y-6">
            <ul class="grid grid-cols-2 gap-3 text-sm">
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">4-Seater</a></li>
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">6-Seater</a></li>
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">8-Seater</a></li>
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Dining Tables</a></li>
            </ul>
          </div>
        </div>

        <!-- OFFICE -->
        <div id="panel-office" class="hidden">
          <div class="sticky top-0 bg-white p-4 border-b flex items-center gap-3">
            <button class="backBtn text-teal-700 flex items-center gap-1" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
              </svg>
              Back
            </button>
            <h4 class="text-lg font-semibold">Office Furniture</h4>
          </div>

          <div class="p-4 space-y-6">
            <ul class="grid grid-cols-2 gap-3 text-sm">
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Office Chairs</a></li>
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Desks</a></li>
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Conference Tables</a></li>
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Filing Cabinets</a></li>
            </ul>
          </div>
        </div>

        <!-- COLLECTIONS -->
        <div id="panel-collections" class="hidden">
          <div class="sticky top-0 bg-white p-4 border-b flex items-center gap-3">
            <button class="backBtn text-teal-700 flex items-center gap-1" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
              </svg>
              Back
            </button>
            <h4 class="text-lg font-semibold">Collections</h4>
          </div>

          <div class="p-4 space-y-6">
            <ul class="grid grid-cols-2 gap-3 text-sm">
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Premium</a></li>
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Budget</a></li>
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">New Arrivals</a></li>
              <li><a href="#" class="block rounded border p-2 hover:bg-gray-50">Best Sellers</a></li>
            </ul>
          </div>
        </div>
      </section>
    </div>
  </aside>
  <div id="overlay" class="fixed inset-0 bg-black/40 hidden z-40"></div>


  <!-- PINCODE MODAL -->
  <div id="pinModal" class="fixed inset-0 bg-black/50 hidden z-50">
    <div class="bg-white max-w-sm mx-auto mt-28 rounded-xl shadow-xl p-6">
      <h3 class="text-lg font-semibold mb-4">Update delivery location</h3>
      <div>
        <label class="text-sm text-gray-600">Pincode</label>
        <input id="pinInput" class="w-full border rounded px-3 py-2" placeholder="6-digit pincode" maxlength="6" inputmode="numeric" pattern="[0-9]*">
      </div>
      <div class="mt-5 flex justify-end gap-2">
        <button id="cancelPin" type="button" class="px-4 py-2 rounded border hover:bg-gray-50">Cancel</button>
        <button id="savePin" type="button" class="px-4 py-2 rounded bg-teal-600 text-white hover:bg-teal-700">Save</button>
      </div>
    </div>
  </div>

</header> 
{% endfor %}
<!-- NAVBAR END HERE -->

